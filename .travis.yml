language: python
deploy:
  provider: pypi
  user: arokem
  password:
    secure: rypMunN3WhUT51p3GKNDnWg8OvvSIkPFjwWJYd1XHeZ6Q7fbVQzWEXGs88vUWD0pKrJd1OdSfGFRc+Aku5jpG/ck9nXES8T7M5KD/6KhHVYcEJnHBFSiepjnF8a/XlVchc5eQD0d2nyYw5hamqHXYwglBMVSjfh1X2oDmAAhiv8=
  on:
    tags: true
    repo: arokem/lowess
    all_branches: true
env:
- CONDA="python=2.7 numpy=1.7 scipy"
- CONDA="python=3.3 numpy scipy"
- CONDA="python=3.4 numpy scipy"
before_install:
- wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh;
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes
- conda update conda
- conda info -a
- travis_retry conda create -n test numpy scipy matplotlib
- source activate test
- travis_retry pip install coveralls
install:
- source activate test
- python setup.py install
script:
- source activate test
- if [[ $CONDA == python=2.7* ]]; then nosetests --exe -v --with-cov --cover-package
  lowess; else nosetests --exe -v lowess; fi
after_success:
- coveralls
